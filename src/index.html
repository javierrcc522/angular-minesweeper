<!DOCTYPE html>
<html ng-app>
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.6/angular.min.js"></script>
    <script>
      function createMinefield() {
        var minefield = {};
        minefield.rows = [];
        for(var i = 0; i < 9; i++) {
          var row = {};
          row.spots = [];
          for(var j = 0; j < 9; j++) {
            var spot = {};
            spot.isCovered = true;
            spot.content = "empty";
            row.spots.push(spot);
          }
          minefield.rows.push(row);
        }
        placeRandomMine(minefield);
        return minefield;
      }

      function getSpot(minefield, row, column) {
        return minefield.rows[row].spots[column];
      }
      
      function MinesweeperController($scope) {
        $scope.minefield = createMinefield();
      }

      function placeRandomMine(minefield) {
        var row = Math.round(Math.random() * 8);
        var column = Math.round(Math.random() * 8);
        var spot = getSpot(minefield, row, column);
        spot.content = "mine";
      }

    </script>
  </head>
  <body>
    <div ng-controller="MinesweeperController">
      <table border="1" class="minefield">
        <tr ng-repeat="row in minefield.rows">
          <td ng-repeat="spot in row.spots" ng-click="spot.isCovered = false" >
            <img ng-if="spot.isCovered" src="/assets/images/covered.png">
            <img ng-if="!spot.isCovered && spot.content == 'empty'" src="/assets/images/empty.png">
            <img ng-if="!spot.isCovered && spot.content == 'mine'" src="/assets/images/mine.png">
          </td>
        </tr>
      </table>
    </div>
  </body>
</html>
